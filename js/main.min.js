let randomimageurl,savedimages,emailReg=/^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/,randomnumber=0,randomimg=$('<img id="RandomImage">');function displaySavedImages(){let e=$("#Display-Images"),a="";e.html("");for(var s=0;s<savedimages.length;s++){console.log(`displaying saved images: ${savedimages[s].images}`),a+=`<div class="display-images"> <h2 class='saved-header'>${savedimages[s].emailaddress}</h2>`;for(var m=0;m<savedimages[s].images.length;m++)a+=`<img class="saved-images" src="${savedimages[s].images[m]}">`;a+="</div>"}e.html(a)}function randomimage(){randomnumber=parseInt(1085*Math.random()),getrandomimage(randomnumber)}function getrandomimage(e){fetch(`https://picsum.photos/id/${e}/200`).then((e=>{e.status>=400?(console.log("error occured: trying again"),randomimage()):e.status>=200?(randomimageurl=e.url,randomimg.attr("src",randomimageurl),randomimg.appendTo("#img-div")):console.log("error occured")}))}$(".submit-btn").on("click",(function(e){e.preventDefault();let a=$("#Email"),s=a.val().trim();if(emailReg.test(s)&&""!==s){$(".form-error-message").hide(),a.removeClass("email-error");let e=!1;if(savedimages){for(var m=0;m<savedimages.length;m++)savedimages[m].emailaddress===s&&(savedimages[m].images.push(randomimageurl),e=!0);e||savedimages.push({emailaddress:s,images:[randomimageurl]})}else savedimages=[{emailaddress:s,images:[randomimageurl]}],console.log(`no previous data stored, first data stored is:${savedimages[0].emailaddress}  ${savedimages[0].images}`);randomimage(),displaySavedImages()}else console.log("invalid email"),a.addClass("email-error"),$(".form-error-message").html("Please enter a valid email").show()})),$(".refresh-btn").on("click",(function(){randomimage()}));